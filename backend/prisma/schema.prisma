generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String
  role      Role     @default(student)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  student   Student?
  companies Company[]
  mentors   Mentor[]
}

model Student {
  id          Int     @id @default(autoincrement())
  studentId   String  @unique
  firstName   String
  lastName    String
  phone       String?
  gpa         Float?
  major       String?
  curriculum  String?
  nationality String?

  userId Int  @unique
  user   User @relation(fields: [userId], references: [id])
}

enum Role {
  student
  teacher
  staff
}

model Announcement {
  id        String    @id @default(uuid())
  title     String
  body      String?
  date      DateTime
  year      String
  linkUrl   String?
  createdAt DateTime  @default(now())
  updatedAt DateTime  @default(now()) @updatedAt
  files     AnnFile[]
}

model AnnFile {
  id             String       @id @default(uuid())
  announcement   Announcement @relation(fields: [announcementId], references: [id], onDelete: Cascade)
  announcementId String
  name           String
  mime           String
  path           String
}

model Company {
  id        String  @id @default(uuid())
  name      String
  address   String
  email     String
  phone     String
  website   String?
  pastYears String

  mentors Mentor[]

  createdBy   User @relation(fields: [createdById], references: [id])
  createdById Int

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Mentor {
  id         String  @id @default(uuid())
  firstName  String
  lastName   String
  department String
  position   String
  email      String
  phone      String?

  company   Company @relation(fields: [companyId], references: [id], onDelete: Cascade)
  companyId String

  createdBy   User @relation(fields: [createdById], references: [id])
  createdById Int

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
